import{S as Gl,i as Ul,s as Bl,k as y,q as D,a as G,l as w,m,r as O,h as p,c as U,n as i,b as B,C as u,K as ul,L as Xt,D as hl,M as ge,E as Xe,o as Wl,u as J,y as ct,N as me,e as ye,z as ft,O as be,P as Hl,A as _t,Q as Xl,g as pt,d as vt,B as dt,p as gt,R as Kl}from"../chunks/index.a4677e45.js";import{H as Ql}from"../chunks/global.7a75ec37.js";import{S as Yl,a as Jl}from"../chunks/SelectRegions.e369572a.js";import{s as Kt,c as mt,a as Zl,b as $l,r as xl}from"../chunks/csv.fb08e2f3.js";const ea=!0,ma=Object.freeze(Object.defineProperty({__proto__:null,prerender:ea},Symbol.toStringTag,{value:"Module"}));function cl(e,t,a){const l=e.slice();return l[13]=t[a],l}function fl(e,t,a){const l=e.slice();return l[13]=t[a],l}function _l(e,t,a){const l=e.slice();return l[13]=t[a],l}function pl(e,t,a){const l=e.slice();return l[13]=t[a],l}function vl(e,t,a){const l=e.slice();return l[13]=t[a],l}function dl(e,t,a){const l=e.slice();return l[13]=t[a],l}function gl(e,t,a){const l=e.slice();return l[13]=t[a],l}function ml(e,t,a){const l=e.slice();return l[13]=t[a],l}function bl(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&8&&a!==(a=o[13].text+"")&&J(l,a),h&8&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function yl(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&16&&a!==(a=o[13].text+"")&&J(l,a),h&16&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function wl(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&64&&a!==(a=o[13].text+"")&&J(l,a),h&64&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function El(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&32&&a!==(a=o[13].text+"")&&J(l,a),h&32&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function kl(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&2&&a!==(a=o[13].text+"")&&J(l,a),h&2&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function Dl(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&256&&a!==(a=o[13].text+"")&&J(l,a),h&256&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function Ol(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&4&&a!==(a=o[13].text+"")&&J(l,a),h&4&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function Pl(e){let t,a=e[13].text+"",l,r;return{c(){t=y("option"),l=D(a),this.h()},l(o){t=w(o,"OPTION",{class:!0});var h=m(t);l=O(h,a),h.forEach(p),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){B(o,t,h),u(t,l)},p(o,h){h&128&&a!==(a=o[13].text+"")&&J(l,a),h&128&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&p(t)}}}function ta(e){let t,a,l,r,o,h,q,E,g,k,d,v,F,Q,j=e[3],b=[];for(let s=0;s<j.length;s+=1)b[s]=bl(ml(e,j,s));let H=e[4],R=[];for(let s=0;s<H.length;s+=1)R[s]=yl(gl(e,H,s));let V=e[6],P=[];for(let s=0;s<V.length;s+=1)P[s]=wl(dl(e,V,s));let ae=e[5],C=[];for(let s=0;s<ae.length;s+=1)C[s]=El(vl(e,ae,s));let ne=e[1],W=[];for(let s=0;s<ne.length;s+=1)W[s]=kl(pl(e,ne,s));let ie=e[8],z=[];for(let s=0;s<ie.length;s+=1)z[s]=Dl(_l(e,ie,s));let ue=e[2],M=[];for(let s=0;s<ue.length;s+=1)M[s]=Ol(fl(e,ue,s));let X=e[7],L=[];for(let s=0;s<X.length;s+=1)L[s]=Pl(cl(e,X,s));return{c(){t=y("p"),a=D("Select Variable:"),l=G(),r=y("select"),o=y("optgroup");for(let s=0;s<b.length;s+=1)b[s].c();h=y("optgroup");for(let s=0;s<R.length;s+=1)R[s].c();q=y("optgroup");for(let s=0;s<P.length;s+=1)P[s].c();E=y("optgroup");for(let s=0;s<C.length;s+=1)C[s].c();g=y("optgroup");for(let s=0;s<W.length;s+=1)W[s].c();k=y("optgroup");for(let s=0;s<z.length;s+=1)z[s].c();d=y("optgroup");for(let s=0;s<M.length;s+=1)M[s].c();v=y("optgroup");for(let s=0;s<L.length;s+=1)L[s].c();this.h()},l(s){t=w(s,"P",{});var S=m(t);a=O(S,"Select Variable:"),S.forEach(p),l=U(s),r=w(s,"SELECT",{class:!0});var n=m(r);o=w(n,"OPTGROUP",{label:!0});var I=m(o);for(let T=0;T<b.length;T+=1)b[T].l(I);I.forEach(p),h=w(n,"OPTGROUP",{label:!0});var A=m(h);for(let T=0;T<R.length;T+=1)R[T].l(A);A.forEach(p),q=w(n,"OPTGROUP",{label:!0});var K=m(q);for(let T=0;T<P.length;T+=1)P[T].l(K);K.forEach(p),E=w(n,"OPTGROUP",{label:!0});var fe=m(E);for(let T=0;T<C.length;T+=1)C[T].l(fe);fe.forEach(p),g=w(n,"OPTGROUP",{label:!0});var Y=m(g);for(let T=0;T<W.length;T+=1)W[T].l(Y);Y.forEach(p),k=w(n,"OPTGROUP",{label:!0});var Oe=m(k);for(let T=0;T<z.length;T+=1)z[T].l(Oe);Oe.forEach(p),d=w(n,"OPTGROUP",{label:!0});var _e=m(d);for(let T=0;T<M.length;T+=1)M[T].l(_e);_e.forEach(p),v=w(n,"OPTGROUP",{label:!0});var pe=m(v);for(let T=0;T<L.length;T+=1)L[T].l(pe);pe.forEach(p),n.forEach(p),this.h()},h(){i(o,"label","Demographics"),i(h,"label","Employment"),i(q,"label","Income"),i(E,"label","Housing"),i(g,"label","Commuting"),i(k,"label","Weather"),i(d,"label","COVID-19 Closures"),i(v,"label","Political Leaning"),i(r,"class","svelte-19nzrqx")},m(s,S){B(s,t,S),u(t,a),B(s,l,S),B(s,r,S),u(r,o);for(let n=0;n<b.length;n+=1)b[n]&&b[n].m(o,null);u(r,h);for(let n=0;n<R.length;n+=1)R[n]&&R[n].m(h,null);u(r,q);for(let n=0;n<P.length;n+=1)P[n]&&P[n].m(q,null);u(r,E);for(let n=0;n<C.length;n+=1)C[n]&&C[n].m(E,null);u(r,g);for(let n=0;n<W.length;n+=1)W[n]&&W[n].m(g,null);u(r,k);for(let n=0;n<z.length;n+=1)z[n]&&z[n].m(k,null);u(r,d);for(let n=0;n<M.length;n+=1)M[n]&&M[n].m(d,null);u(r,v);for(let n=0;n<L.length;n+=1)L[n]&&L[n].m(v,null);ul(r,e[0]),F||(Q=Xt(r,"change",e[9]),F=!0)},p(s,[S]){if(S&8){j=s[3];let n;for(n=0;n<j.length;n+=1){const I=ml(s,j,n);b[n]?b[n].p(I,S):(b[n]=bl(I),b[n].c(),b[n].m(o,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=j.length}if(S&16){H=s[4];let n;for(n=0;n<H.length;n+=1){const I=gl(s,H,n);R[n]?R[n].p(I,S):(R[n]=yl(I),R[n].c(),R[n].m(h,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=H.length}if(S&64){V=s[6];let n;for(n=0;n<V.length;n+=1){const I=dl(s,V,n);P[n]?P[n].p(I,S):(P[n]=wl(I),P[n].c(),P[n].m(q,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=V.length}if(S&32){ae=s[5];let n;for(n=0;n<ae.length;n+=1){const I=vl(s,ae,n);C[n]?C[n].p(I,S):(C[n]=El(I),C[n].c(),C[n].m(E,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=ae.length}if(S&2){ne=s[1];let n;for(n=0;n<ne.length;n+=1){const I=pl(s,ne,n);W[n]?W[n].p(I,S):(W[n]=kl(I),W[n].c(),W[n].m(g,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=ne.length}if(S&256){ie=s[8];let n;for(n=0;n<ie.length;n+=1){const I=_l(s,ie,n);z[n]?z[n].p(I,S):(z[n]=Dl(I),z[n].c(),z[n].m(k,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=ie.length}if(S&4){ue=s[2];let n;for(n=0;n<ue.length;n+=1){const I=fl(s,ue,n);M[n]?M[n].p(I,S):(M[n]=Ol(I),M[n].c(),M[n].m(d,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=ue.length}if(S&128){X=s[7];let n;for(n=0;n<X.length;n+=1){const I=cl(s,X,n);L[n]?L[n].p(I,S):(L[n]=Pl(I),L[n].c(),L[n].m(v,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=X.length}S&511&&ul(r,s[0])},i:hl,o:hl,d(s){s&&p(t),s&&p(l),s&&p(r),ge(b,s),ge(R,s),ge(P,s),ge(C,s),ge(W,s),ge(z,s),ge(M,s),ge(L,s),F=!1,Q()}}}function la(e,t,a){let l;Xe(e,Kt,b=>a(11,l=b));let r,o=[],h=[],q=[],E=[],g=[],k=[],d=[],v=[],F=[];async function Q(){try{const H=await(await fetch("../variables_data_dictionary.csv")).text();a(10,o=mt(H))}catch(b){console.error("Error loading CSV data:",b)}}Wl(()=>{Q(),a(0,r=l)});function j(b){const H=b.target.value;Kt.set(H)}return e.$$.update=()=>{e.$$.dirty&1024&&a(1,h=o.filter(b=>b.group==="Commuting")),e.$$.dirty&1024&&a(2,q=o.filter(b=>b.group==="COVID-19 Closures")),e.$$.dirty&1024&&a(3,E=o.filter(b=>b.group==="Demographics")),e.$$.dirty&1024&&a(4,g=o.filter(b=>b.group==="Employment")),e.$$.dirty&1024&&a(5,k=o.filter(b=>b.group==="Housing")),e.$$.dirty&1024&&a(6,d=o.filter(b=>b.group==="Income")),e.$$.dirty&1024&&a(7,v=o.filter(b=>b.group==="Political Leaning")),e.$$.dirty&1024&&a(8,F=o.filter(b=>b.group==="Weather"))},[r,h,q,E,g,k,d,v,F,j,o]}class aa extends Gl{constructor(t){super(),Ul(this,t,la,ta,Bl,{})}}function ra(e){var t,a,l=e.length;if(l===1)t=0,a=e[0][1];else{for(var r=0,o=0,h=0,q=0,E,g,k,d=0;d<l;d++)E=e[d],g=E[0],k=E[1],r+=g,o+=k,h+=g*g,q+=g*k;t=(l*q-r*o)/(l*h-r*r),a=o/l-t*r/l}return{m:t,b:a}}function oa(e){if(e.length===0)return 0;var t=e[0],a=0,l;if(typeof t!="number")return NaN;for(var r=1;r<e.length;r++){if(typeof e[r]!="number")return NaN;l=t+e[r],Math.abs(t)>=Math.abs(e[r])?a+=t-l+e[r]:a+=e[r]-l+t,t=l}return t+a}function Qt(e){if(e.length===0)throw new Error("mean requires at least one data point");return oa(e)/e.length}function na(e,t){var a=Qt(e),l=0,r,o;if(t===2)for(o=0;o<e.length;o++)r=e[o]-a,l+=r*r;else for(o=0;o<e.length;o++)l+=Math.pow(e[o]-a,t);return l}function ia(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var a=Qt(e),l=Qt(t),r=0,o=0;o<e.length;o++)r+=(e[o]-a)*(t[o]-l);var h=e.length-1;return r/h}function sa(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");var t=na(e,2),a=e.length-1;return t/a}function ql(e){var t=sa(e);return Math.sqrt(t)}function ua(e,t){var a=ia(e,t),l=ql(e),r=ql(t);return a/l/r}function Fl(e,t,a){const l=e.slice();return l[44]=t[a],l[46]=a,l}function Vl(e,t,a){const l=e.slice();return l[44]=t[a],l[46]=a,l}function Cl(e,t,a){const l=e.slice();return l[46]=t[a],l}function Tl(e,t,a){const l=e.slice();return l[50]=t[a],l[46]=a,l}function Il(e){let t,a,l,r,o=(100*e[50]).toFixed(0)+"",h,q,E,g,k,d;return{c(){t=me("line"),r=me("text"),h=D(o),q=D("%"),g=me("line"),this.h()},l(v){t=be(v,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(t).forEach(p),r=be(v,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var F=m(r);h=O(F,o),q=O(F,"%"),F.forEach(p),g=be(v,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(g).forEach(p),this.h()},h(){i(t,"class","grid svelte-h15qja"),i(t,"x1","40"),i(t,"y1",a=30+e[46]*e[19]),i(t,"x2",e[1]),i(t,"y2",l=30+e[46]*e[19]),i(r,"class","axis-label svelte-h15qja"),i(r,"x","35"),i(r,"y",E=35+e[46]*e[19]),i(r,"text-anchor","end"),i(g,"class","grid-white svelte-h15qja"),i(g,"x1","37"),i(g,"y1",k=30+e[46]*e[19]),i(g,"x2","45"),i(g,"y2",d=30+e[46]*e[19])},m(v,F){B(v,t,F),B(v,r,F),u(r,h),u(r,q),B(v,g,F)},p(v,F){F[0]&524288&&a!==(a=30+v[46]*v[19])&&i(t,"y1",a),F[0]&2&&i(t,"x2",v[1]),F[0]&524288&&l!==(l=30+v[46]*v[19])&&i(t,"y2",l),F[0]&8&&o!==(o=(100*v[50]).toFixed(0)+"")&&J(h,o),F[0]&524288&&E!==(E=35+v[46]*v[19])&&i(r,"y",E),F[0]&524288&&k!==(k=30+v[46]*v[19])&&i(g,"y1",k),F[0]&524288&&d!==(d=30+v[46]*v[19])&&i(g,"y2",d)},d(v){v&&p(t),v&&p(r),v&&p(g)}}}function Sl(e){let t,a,l,r,o=(e[46]*e[16]).toLocaleString()+"",h,q,E,g,k;return{c(){t=me("line"),r=me("text"),h=D(o),E=me("line"),this.h()},l(d){t=be(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(t).forEach(p),r=be(d,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var v=m(r);h=O(v,o),v.forEach(p),E=be(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(E).forEach(p),this.h()},h(){i(t,"class","grid svelte-h15qja"),i(t,"x1",a=45+e[46]*e[15]),i(t,"y1","22"),i(t,"x2",l=45+e[46]*e[15]),i(t,"y2",e[2]),i(r,"class","axis-label svelte-h15qja"),i(r,"x",q=47+e[46]*e[15]),i(r,"y","17"),i(r,"text-anchor","end"),i(E,"class","grid-white svelte-h15qja"),i(E,"x1",g=45+e[46]*e[15]),i(E,"y1","22"),i(E,"x2",k=45+e[46]*e[15]),i(E,"y2","31")},m(d,v){B(d,t,v),B(d,r,v),u(r,h),B(d,E,v)},p(d,v){v[0]&32768&&a!==(a=45+d[46]*d[15])&&i(t,"x1",a),v[0]&32768&&l!==(l=45+d[46]*d[15])&&i(t,"x2",l),v[0]&4&&i(t,"y2",d[2]),v[0]&65536&&o!==(o=(d[46]*d[16]).toLocaleString()+"")&&J(h,o),v[0]&32768&&q!==(q=47+d[46]*d[15])&&i(r,"x",q),v[0]&32768&&g!==(g=45+d[46]*d[15])&&i(E,"x1",g),v[0]&32768&&k!==(k=45+d[46]*d[15])&&i(E,"x2",k)},d(d){d&&p(t),d&&p(r),d&&p(E)}}}function Ml(e){let t,a,l;return{c(){t=me("circle"),this.h()},l(r){t=be(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(t).forEach(p),this.h()},h(){i(t,"class","point-white svelte-h15qja"),i(t,"cx",a=45+Ee([0,e[6]],e[5],parseFloat(e[44][e[7]]))),i(t,"cy",l=30+we(e[18],e[2]-40,e[44].seasonal_average)),i(t,"r","6"),i(t,"fill","black"),i(t,"stroke","white"),i(t,"stroke-width","3")},m(r,o){B(r,t,o)},p(r,o){o[0]&225&&a!==(a=45+Ee([0,r[6]],r[5],parseFloat(r[44][r[7]])))&&i(t,"cx",a),o[0]&262149&&l!==(l=30+we(r[18],r[2]-40,r[44].seasonal_average))&&i(t,"cy",l)},d(r){r&&p(t)}}}function Nl(e){let t=e[44][e[4]]>=0&&!isNaN(parseFloat(e[44][e[4]])),a,l=t&&Ml(e);return{c(){l&&l.c(),a=ye()},l(r){l&&l.l(r),a=ye()},m(r,o){l&&l.m(r,o),B(r,a,o)},p(r,o){o[0]&17&&(t=r[44][r[4]]>=0&&!isNaN(parseFloat(r[44][r[4]]))),t?l?l.p(r,o):(l=Ml(r),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&p(a)}}}function Rl(e){let t,a,l,r,o,h;function q(...g){return e[32](e[44],...g)}function E(...g){return e[33](e[44],...g)}return{c(){t=me("circle"),this.h()},l(g){t=be(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(t).forEach(p),this.h()},h(){i(t,"class","point svelte-h15qja"),i(t,"cx",a=45+Ee([0,e[6]],e[5],parseFloat(e[44][e[7]]))),i(t,"cy",l=30+we(e[18],e[2]-40,e[44].seasonal_average)),i(t,"r","6"),i(t,"fill",r=e[20].find(q).colour),i(t,"stroke","white"),i(t,"stroke-width","0")},m(g,k){B(g,t,k),o||(h=[Xt(t,"mouseover",E),Xt(t,"mouseout",e[34])],o=!0)},p(g,k){e=g,k[0]&225&&a!==(a=45+Ee([0,e[6]],e[5],parseFloat(e[44][e[7]])))&&i(t,"cx",a),k[0]&262149&&l!==(l=30+we(e[18],e[2]-40,e[44].seasonal_average))&&i(t,"cy",l),k[0]&1&&r!==(r=e[20].find(q).colour)&&i(t,"fill",r)},d(g){g&&p(t),o=!1,Kl(h)}}}function jl(e){let t=e[44][e[4]]>=0&&!isNaN(parseFloat(e[44][e[4]])),a,l=t&&Rl(e);return{c(){l&&l.c(),a=ye()},l(r){l&&l.l(r),a=ye()},m(r,o){l&&l.m(r,o),B(r,a,o)},p(r,o){o[0]&17&&(t=r[44][r[4]]>=0&&!isNaN(parseFloat(r[44][r[4]]))),t?l?l.p(r,o):(l=Rl(r),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&p(a)}}}function Ll(e){let t,a,l,r,o=e[17].city+"",h,q,E,g,k=Math.round(100*e[17].seasonal_average)+"",d,v,F,Q,j=e[17][e[7]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"",b,H,R;return{c(){t=me("foreignObject"),a=y("div"),l=y("p"),r=y("u"),h=D(o),q=G(),E=y("br"),g=D(` 
                        Recovery Rate: `),d=D(k),v=D(`%
                        `),F=y("br"),Q=D(`
                        X-Value: `),b=D(j),this.h()},l(V){t=be(V,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var P=m(t);a=w(P,"DIV",{id:!0,style:!0,class:!0});var ae=m(a);l=w(ae,"P",{id:!0,style:!0,class:!0});var C=m(l);r=w(C,"U",{});var ne=m(r);h=O(ne,o),ne.forEach(p),q=U(C),E=w(C,"BR",{}),g=O(C,` 
                        Recovery Rate: `),d=O(C,k),v=O(C,`%
                        `),F=w(C,"BR",{}),Q=O(C,`
                        X-Value: `),b=O(C,j),C.forEach(p),ae.forEach(p),P.forEach(p),this.h()},h(){i(l,"id","tooltip-p"),gt(l,"color",e[20].find(e[35]).text),i(l,"class","svelte-h15qja"),i(a,"id","tooltip"),gt(a,"background-color",e[20].find(e[36]).colour),i(a,"class","svelte-h15qja"),i(t,"x",H=(parseFloat(e[17][e[7]])<e[6]/2?0:-145)+55+Ee([0,e[6]],e[5],parseFloat(e[17][e[7]]))),i(t,"y",R=22+we(e[18],e[2]-40,e[17].seasonal_average)),i(t,"width","125"),i(t,"height","50")},m(V,P){B(V,t,P),u(t,a),u(a,l),u(l,r),u(r,h),u(l,q),u(l,E),u(l,g),u(l,d),u(l,v),u(l,F),u(l,Q),u(l,b)},p(V,P){P[0]&131072&&o!==(o=V[17].city+"")&&J(h,o),P[0]&131072&&k!==(k=Math.round(100*V[17].seasonal_average)+"")&&J(d,k),P[0]&131200&&j!==(j=V[17][V[7]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"")&&J(b,j),P[0]&131072&&gt(l,"color",V[20].find(V[35]).text),P[0]&131072&&gt(a,"background-color",V[20].find(V[36]).colour),P[0]&131296&&H!==(H=(parseFloat(V[17][V[7]])<V[6]/2?0:-145)+55+Ee([0,V[6]],V[5],parseFloat(V[17][V[7]])))&&i(t,"x",H),P[0]&393220&&R!==(R=22+we(V[18],V[2]-40,V[17].seasonal_average))&&i(t,"y",R)},d(V){V&&p(t)}}}function ha(e){let t,a,l,r,o,h,q,E,g,k,d,v,F,Q,j,b,H,R,V,P,ae,C,ne,W,ie,z,ue,M,X,L,s,S,n,I,A,K,fe,Y,Oe,_e,pe,T,ke,Ue,f,Z,$,Ke,Qe,Ye,Je,Ze,$e,bt,x,Pe,Te,yt,wt,xe,Et,qe,Ie,kt,Dt,et,Ot,Fe,Se,Pt,qt,Be=e[8].toFixed(3)+"",tt,Ft,De,Me,Vt,Ct,We=Al(e[9])+"",lt,Tt,He=e[10].toFixed(2)+"",at,It,Ve,Ne,St,Mt,rt,Nt,Rt,jt,Lt,zt,At,Gt,Ut,Bt,Wt,Yt,re;t=new Ql({}),Y=new Yl({}),pe=new Jl({props:{europe:"no"}}),ke=new aa({});let Re=e[3].reverse(),ee=[];for(let c=0;c<Re.length;c+=1)ee[c]=Il(Tl(e,Re,c));let Ht=[0,1,2,3,4],ve=[];for(let c=0;c<5;c+=1)ve[c]=Sl(Cl(e,Ht,c));let je=e[0],te=[];for(let c=0;c<je.length;c+=1)te[c]=Nl(Vl(e,je,c));let Le=e[0],le=[];for(let c=0;c<Le.length;c+=1)le[c]=jl(Fl(e,Le,c));let oe=e[17]!=null&&Ll(e);return{c(){ct(t.$$.fragment),a=G(),l=y("main"),r=y("div"),o=y("h1"),h=D("Downtown Recovery Correlations"),q=G(),E=y("p"),g=D("This page plots downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),k=G(),d=y("p"),v=D("The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),F=G(),Q=y("p"),j=D("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),b=y("a"),H=D("here"),R=D(" to download the y-axis data shown on this chart."),V=G(),P=y("p"),ae=D("The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),C=y("a"),ne=D("here"),W=D(". You may also wish to download a "),ie=y("a"),z=D("data dictionary"),ue=D(", which includes the names of data sources for each variable."),M=G(),X=y("p"),L=D("For more information, read our "),s=y("a"),S=D("Methodology"),n=D(" page."),I=G(),A=y("div"),K=y("div"),fe=y("div"),ct(Y.$$.fragment),Oe=G(),_e=y("div"),ct(pe.$$.fragment),T=G(),ct(ke.$$.fragment),Ue=G(),f=me("svg");for(let c=0;c<ee.length;c+=1)ee[c].c();Z=ye();for(let c=0;c<5;c+=1)ve[c].c();$=me("line");for(let c=0;c<te.length;c+=1)te[c].c();Ze=ye();for(let c=0;c<le.length;c+=1)le[c].c();$e=ye(),oe&&oe.c(),bt=G(),x=y("div"),Pe=y("p"),Te=y("i"),yt=D("X-Variable Name:"),wt=G(),xe=D(e[12]),Et=G(),qe=y("p"),Ie=y("i"),kt=D("Group:"),Dt=G(),et=D(e[14]),Ot=G(),Fe=y("p"),Se=y("i"),Pt=D("Correlation Coefficient:"),qt=G(),tt=D(Be),Ft=G(),De=y("p"),Me=y("i"),Vt=D("Trend Line Formula"),Ct=D(": Recovery Rate (%) = "),lt=D(We),Tt=D(" X + "),at=D(He),It=G(),Ve=y("p"),Ne=y("i"),St=D("Data Source:"),Mt=G(),rt=D(e[13]),Nt=G(),Rt=y("br"),jt=G(),Lt=y("br"),zt=G(),At=y("br"),Gt=G(),Ut=y("br"),Bt=G(),Wt=y("br"),this.h()},l(c){ft(t.$$.fragment,c),a=U(c),l=w(c,"MAIN",{class:!0});var N=m(l);r=w(N,"DIV",{class:!0});var _=m(r);o=w(_,"H1",{});var he=m(o);h=O(he,"Downtown Recovery Correlations"),he.forEach(p),q=U(_),E=w(_,"P",{});var Jt=m(E);g=O(Jt,"This page plots downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),Jt.forEach(p),k=U(_),d=w(_,"P",{});var Zt=m(d);v=O(Zt,"The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),Zt.forEach(p),F=U(_),Q=w(_,"P",{});var ot=m(Q);j=O(ot,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),b=w(ot,"A",{href:!0});var $t=m(b);H=O($t,"here"),$t.forEach(p),R=O(ot," to download the y-axis data shown on this chart."),ot.forEach(p),V=U(_),P=w(_,"P",{});var ze=m(P);ae=O(ze,"The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),C=w(ze,"A",{href:!0});var xt=m(C);ne=O(xt,"here"),xt.forEach(p),W=O(ze,". You may also wish to download a "),ie=w(ze,"A",{href:!0});var el=m(ie);z=O(el,"data dictionary"),el.forEach(p),ue=O(ze,", which includes the names of data sources for each variable."),ze.forEach(p),M=U(_),X=w(_,"P",{});var nt=m(X);L=O(nt,"For more information, read our "),s=w(nt,"A",{href:!0});var tl=m(s);S=O(tl,"Methodology"),tl.forEach(p),n=O(nt," page."),nt.forEach(p),_.forEach(p),I=U(N),A=w(N,"DIV",{id:!0,class:!0});var de=m(A);K=w(de,"DIV",{id:!0,class:!0});var Ae=m(K);fe=w(Ae,"DIV",{id:!0,class:!0});var ll=m(fe);ft(Y.$$.fragment,ll),ll.forEach(p),Oe=U(Ae),_e=w(Ae,"DIV",{id:!0,class:!0});var al=m(_e);ft(pe.$$.fragment,al),al.forEach(p),T=U(Ae),ft(ke.$$.fragment,Ae),Ae.forEach(p),Ue=U(de),f=be(de,"svg",{height:!0,width:!0,id:!0,class:!0});var Ce=m(f);for(let se=0;se<ee.length;se+=1)ee[se].l(Ce);Z=ye();for(let se=0;se<5;se+=1)ve[se].l(Ce);$=be(Ce,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),m($).forEach(p);for(let se=0;se<te.length;se+=1)te[se].l(Ce);Ze=ye();for(let se=0;se<le.length;se+=1)le[se].l(Ce);$e=ye(),oe&&oe.l(Ce),Ce.forEach(p),bt=U(de),x=w(de,"DIV",{class:!0});var ce=m(x);Pe=w(ce,"P",{});var it=m(Pe);Te=w(it,"I",{class:!0});var rl=m(Te);yt=O(rl,"X-Variable Name:"),rl.forEach(p),wt=U(it),xe=O(it,e[12]),it.forEach(p),Et=U(ce),qe=w(ce,"P",{});var st=m(qe);Ie=w(st,"I",{class:!0});var ol=m(Ie);kt=O(ol,"Group:"),ol.forEach(p),Dt=U(st),et=O(st,e[14]),st.forEach(p),Ot=U(ce),Fe=w(ce,"P",{});var ut=m(Fe);Se=w(ut,"I",{class:!0});var nl=m(Se);Pt=O(nl,"Correlation Coefficient:"),nl.forEach(p),qt=U(ut),tt=O(ut,Be),ut.forEach(p),Ft=U(ce),De=w(ce,"P",{});var Ge=m(De);Me=w(Ge,"I",{class:!0});var il=m(Me);Vt=O(il,"Trend Line Formula"),il.forEach(p),Ct=O(Ge,": Recovery Rate (%) = "),lt=O(Ge,We),Tt=O(Ge," X + "),at=O(Ge,He),Ge.forEach(p),It=U(ce),Ve=w(ce,"P",{});var ht=m(Ve);Ne=w(ht,"I",{class:!0});var sl=m(Ne);St=O(sl,"Data Source:"),sl.forEach(p),Mt=U(ht),rt=O(ht,e[13]),ht.forEach(p),Nt=U(ce),Rt=w(ce,"BR",{}),jt=U(ce),Lt=w(ce,"BR",{}),ce.forEach(p),zt=U(de),At=w(de,"BR",{}),Gt=U(de),Ut=w(de,"BR",{}),Bt=U(de),Wt=w(de,"BR",{}),de.forEach(p),N.forEach(p),this.h()},h(){i(b,"href","/ranking_data.csv"),i(C,"href","/variables_data.csv"),i(ie,"href","/variables_data_dictionary.csv"),i(s,"href","/methodology"),i(r,"class","text"),i(fe,"id","options-season"),i(fe,"class","svelte-h15qja"),i(_e,"id","options-region"),i(_e,"class","svelte-h15qja"),i(K,"id","options"),i(K,"class","svelte-h15qja"),i($,"x1",Ke=45+Ee([0,e[6]],e[5],parseFloat(e[11][0][0]))),i($,"y1",Qe=30+we(e[18],e[2]-40,parseFloat(e[11][0][1]))),i($,"x2",Ye=45+Ee([0,e[6]],e[5],parseFloat(e[11][1][0]))),i($,"y2",Je=30+we(e[18],e[2]-40,parseFloat(e[11][1][1]))),i($,"stroke","#D0D1C9"),i($,"stroke-width","1.5"),i($,"stroke-dasharray","4 2"),i(f,"height",e[2]),i(f,"width",e[1]),i(f,"id","chart"),i(f,"class","svelte-h15qja"),i(Te,"class","italic"),i(Ie,"class","italic"),i(Se,"class","italic"),i(Me,"class","italic"),i(Ne,"class","italic"),i(x,"class","text"),i(A,"id","chart-wrapper"),i(A,"class","svelte-h15qja"),Hl(()=>e[37].call(A)),i(l,"class","svelte-h15qja")},m(c,N){_t(t,c,N),B(c,a,N),B(c,l,N),u(l,r),u(r,o),u(o,h),u(r,q),u(r,E),u(E,g),u(r,k),u(r,d),u(d,v),u(r,F),u(r,Q),u(Q,j),u(Q,b),u(b,H),u(Q,R),u(r,V),u(r,P),u(P,ae),u(P,C),u(C,ne),u(P,W),u(P,ie),u(ie,z),u(P,ue),u(r,M),u(r,X),u(X,L),u(X,s),u(s,S),u(X,n),u(l,I),u(l,A),u(A,K),u(K,fe),_t(Y,fe,null),u(K,Oe),u(K,_e),_t(pe,_e,null),u(K,T),_t(ke,K,null),u(A,Ue),u(A,f);for(let _=0;_<ee.length;_+=1)ee[_]&&ee[_].m(f,null);u(f,Z);for(let _=0;_<5;_+=1)ve[_]&&ve[_].m(f,null);u(f,$);for(let _=0;_<te.length;_+=1)te[_]&&te[_].m(f,null);u(f,Ze);for(let _=0;_<le.length;_+=1)le[_]&&le[_].m(f,null);u(f,$e),oe&&oe.m(f,null),u(A,bt),u(A,x),u(x,Pe),u(Pe,Te),u(Te,yt),u(Pe,wt),u(Pe,xe),u(x,Et),u(x,qe),u(qe,Ie),u(Ie,kt),u(qe,Dt),u(qe,et),u(x,Ot),u(x,Fe),u(Fe,Se),u(Se,Pt),u(Fe,qt),u(Fe,tt),u(x,Ft),u(x,De),u(De,Me),u(Me,Vt),u(De,Ct),u(De,lt),u(De,Tt),u(De,at),u(x,It),u(x,Ve),u(Ve,Ne),u(Ne,St),u(Ve,Mt),u(Ve,rt),u(x,Nt),u(x,Rt),u(x,jt),u(x,Lt),u(A,zt),u(A,At),u(A,Gt),u(A,Ut),u(A,Bt),u(A,Wt),Yt=Xl(A,e[37].bind(A)),re=!0},p(c,N){if(N[0]&524298){Re=c[3].reverse();let _;for(_=0;_<Re.length;_+=1){const he=Tl(c,Re,_);ee[_]?ee[_].p(he,N):(ee[_]=Il(he),ee[_].c(),ee[_].m(f,Z))}for(;_<ee.length;_+=1)ee[_].d(1);ee.length=Re.length}if(N[0]&98308){Ht=[0,1,2,3,4];let _;for(_=0;_<5;_+=1){const he=Cl(c,Ht,_);ve[_]?ve[_].p(he,N):(ve[_]=Sl(he),ve[_].c(),ve[_].m(f,$))}for(;_<5;_+=1)ve[_].d(1)}if((!re||N[0]&2144&&Ke!==(Ke=45+Ee([0,c[6]],c[5],parseFloat(c[11][0][0]))))&&i($,"x1",Ke),(!re||N[0]&264196&&Qe!==(Qe=30+we(c[18],c[2]-40,parseFloat(c[11][0][1]))))&&i($,"y1",Qe),(!re||N[0]&2144&&Ye!==(Ye=45+Ee([0,c[6]],c[5],parseFloat(c[11][1][0]))))&&i($,"x2",Ye),(!re||N[0]&264196&&Je!==(Je=30+we(c[18],c[2]-40,parseFloat(c[11][1][1]))))&&i($,"y2",Je),N[0]&262389){je=c[0];let _;for(_=0;_<je.length;_+=1){const he=Vl(c,je,_);te[_]?te[_].p(he,N):(te[_]=Nl(he),te[_].c(),te[_].m(f,Ze))}for(;_<te.length;_+=1)te[_].d(1);te.length=je.length}if(N[0]&3539189){Le=c[0];let _;for(_=0;_<Le.length;_+=1){const he=Fl(c,Le,_);le[_]?le[_].p(he,N):(le[_]=jl(he),le[_].c(),le[_].m(f,$e))}for(;_<le.length;_+=1)le[_].d(1);le.length=Le.length}c[17]!=null?oe?oe.p(c,N):(oe=Ll(c),oe.c(),oe.m(f,null)):oe&&(oe.d(1),oe=null),(!re||N[0]&4)&&i(f,"height",c[2]),(!re||N[0]&2)&&i(f,"width",c[1]),(!re||N[0]&4096)&&J(xe,c[12]),(!re||N[0]&16384)&&J(et,c[14]),(!re||N[0]&256)&&Be!==(Be=c[8].toFixed(3)+"")&&J(tt,Be),(!re||N[0]&512)&&We!==(We=Al(c[9])+"")&&J(lt,We),(!re||N[0]&1024)&&He!==(He=c[10].toFixed(2)+"")&&J(at,He),(!re||N[0]&8192)&&J(rt,c[13])},i(c){re||(pt(t.$$.fragment,c),pt(Y.$$.fragment,c),pt(pe.$$.fragment,c),pt(ke.$$.fragment,c),re=!0)},o(c){vt(t.$$.fragment,c),vt(Y.$$.fragment,c),vt(pe.$$.fragment,c),vt(ke.$$.fragment,c),re=!1},d(c){dt(t,c),c&&p(a),c&&p(l),dt(Y),dt(pe),dt(ke),ge(ee,c),ge(ve,c),ge(te,c),ge(le,c),oe&&oe.d(),Yt()}}}function zl(e,t){let a=[];for(let l=0;l<=Math.ceil(e/t);l++)a.push(l*t);return a}function ca(e){const t=Math.pow(10,Math.floor(Math.log10(e)));return Math.ceil(e/t)*t}function we(e,t,a){return t-t*a/(e[1]-e[0])}function Ee(e,t,a){return t*a/(e[1]-e[0])}function fa(e,t,a,l,r,o){let h,q,E,g,k=e*a+t;k>=l&&k<=o?(h=a,q=k):e>0?(h=(l-t)/e,q=l):(h=(o-t)/e,q=o);let d=e*r+t;return d>=l&&d<=o?(E=r,g=d):e>0?(E=(o-t)/e,g=o):(E=(l-t)/e,g=l),[[h,q],[E,g]]}function Al(e){return Math.abs(e)<.001?e.toExponential(2):Math.abs(e)>=1e3?e.toLocaleString(void 0,{maximumFractionDigits:0}):Math.abs(e)>=10?e.toFixed(2):e.toFixed(4)}function _a(e,t,a){let l,r,o,h,q,E;Xe(e,Kt,f=>a(7,o=f)),Xe(e,Zl,f=>a(30,h=f)),Xe(e,$l,f=>a(31,q=f)),Xe(e,xl,f=>a(40,E=f));let g=[],k=[],d=[],v=[],F=[],Q=0,j,b=0,H=0,R=[[0,0],[1,1]],V="",P="",ae="";const C=E;async function ne(){try{const Z=await(await fetch("../ranking_data.csv")).text();a(22,g=mt(Z))}catch(f){console.error("Error loading CSV data:",f)}}async function W(){try{const Z=await(await fetch("../variables_data.csv")).text();a(23,k=mt(Z))}catch(f){console.error("Error loading CSV data:",f)}}async function ie(){try{const Z=await(await fetch("../variables_data_dictionary.csv")).text();a(25,F=mt(Z))}catch(f){console.error("Error loading CSV data:",f)}}Wl(()=>{ne(),W(),ie()});let z,ue=420,M=1,X=[0,1],L,s=100,S=1,n=1,I=.1,A=1,K;const fe=function(f){f.clientX,f.clientY};let Y=[];const Oe=(f,Z)=>Z.name===f.region,_e=(f,Z)=>{a(17,K=f),fe(Z)},pe=()=>{a(17,K=void 0)},T=f=>f.name===K.region,ke=f=>f.name===K.region;function Ue(){z=this.offsetWidth,a(1,z)}return e.$$.update=()=>{e.$$.dirty[0]&1077936128|e.$$.dirty[1]&1&&a(24,d=g.filter(f=>f.metric==="downtown").filter(f=>f.region!=="Europe").filter(f=>f.Season===`Season_${q}`).filter(f=>h.includes(f.region)).sort((f,Z)=>Z.seasonal_average-f.seasonal_average)),e.$$.dirty[0]&25165824&&a(0,v=d.map(function(f){var Z=k.find(function($){return $.city===f.city});return Object.assign({},f,Z)})),e.$$.dirty[0]&33554560&&a(13,P=F.length>0?F.filter(f=>f.value===o)[0].source:null),e.$$.dirty[0]&33554560&&a(12,V=F.length>0?F.filter(f=>f.value===o)[0].text:null),e.$$.dirty[0]&33554560&&a(14,ae=F.length>0?F.filter(f=>f.value===o)[0].group:null),e.$$.dirty[0]&2&&a(2,ue=z*.666),e.$$.dirty[0]&1&&a(27,M=v.length!==0?v[0].seasonal_average:1),e.$$.dirty[0]&134217728&&a(27,M=M<1?1:M),e.$$.dirty[0]&134217728&&(M<2?a(3,X=zl(M,.2)):a(3,X=zl(M,.5))),e.$$.dirty[0]&12&&a(19,l=(ue-40)/(X.length-1)),e.$$.dirty[0]&8&&a(18,r=[Math.min(...X),Math.max(...X)]),e.$$.dirty[0]&128&&a(4,L=o),e.$$.dirty[0]&2&&a(5,s=z-45-10),e.$$.dirty[0]&17&&a(28,S=Math.max(...v.map(f=>parseFloat(f[L])).filter(f=>!isNaN(f)))),e.$$.dirty[0]&268435456&&a(6,n=ca(S)),e.$$.dirty[0]&32&&a(15,I=s/4),e.$$.dirty[0]&64&&a(16,A=n/4),e.$$.dirty[0]&17&&a(29,Y=v.filter(f=>!isNaN(parseFloat(f[L])))),e.$$.dirty[0]&536870912&&console.log(Y),e.$$.dirty[0]&536870928&&a(8,Q=Y.length>0?ua(Y.map(f=>parseFloat(f[L])),Y.map(f=>parseFloat(f.seasonal_average))):0),e.$$.dirty[0]&536870928&&a(26,j=Y.length>0?ra(Y.map(f=>[parseFloat(f[L]),parseFloat(f.seasonal_average)])):null),e.$$.dirty[0]&67108936&&a(11,R=j!==null?fa(j.m,j.b,0,0,n,Math.max(...X)):[[0,0],[1,1]]),e.$$.dirty[0]&67108864&&a(9,b=j!==null?100*j.m:0),e.$$.dirty[0]&67108864&&j!==null&&a(10,H=100*j.b)},[v,z,ue,X,L,s,n,o,Q,b,H,R,V,P,ae,I,A,K,r,l,C,fe,g,k,d,F,j,M,S,Y,h,q,Oe,_e,pe,T,ke,Ue]}class ba extends Gl{constructor(t){super(),Ul(this,t,_a,ha,Bl,{},null,[-1,-1])}}export{ba as component,ma as universal};
